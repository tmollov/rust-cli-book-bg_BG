# Кодове за изход

Работата на една програма не винаги завършва успешно.
И когато възникне грешка,
трябва да се уверите, че предавате правилно необходимата информация.
В допълнение към
[уведомяването на потребителите за грешки](human-communication.html),
на повечето системи,
когато процесът излезе,
той също предава код за изход
(цяло число между 0 и 255 е съвместимо с повечето платформи).
Трябва да опитате да предавате правилния код
за състоянието на вашата програма.
Например,
в идеалния случай, когато вашата програма завърши успешно,
то трябва да излезе с код `0`.

Когато се появи грешка нещата стават малко по сложни.
В реалния свят,
много инструменти излизат с код `1` когато възникне обща грешка.
В момента Rust задава код за изход `101`, когато процесът се паникьоса.
Освен това хората са направили много неща в своите програми.

И така, какво да правим?
Екосистемата `BSD` е събрала обща дефиниция за техните изходни кодове
(можете да ги намерите [тук][`sysexits.h`]).
Библиотеката [`exitcode`] предоставя същите тези кодове,
готови за използване във вашето приложение.
Моля, вижте неговата API документация за възможните стойности, които да използвате.

След като добавите зависимостта `exitcode` към вашия `Cargo.toml`,
можете да го използвате така:

```rust,ignore
fn main() {
    // ...actual work...
    match result {
        Ok(_) => {
            println!("Done!");
            std::process::exit(exitcode::OK);
        }
        Err(CustomError::CantReadConfig(e)) => {
            eprintln!("Error: {}", e);
            std::process::exit(exitcode::CONFIG);
        }
        Err(e) => {
            eprintln!("Error: {}", e);
            std::process::exit(exitcode::DATAERR);
        }
    }
}
```

[`exitcode`]: https://crates.io/crates/exitcode
[`sysexits.h`]: https://www.freebsd.org/cgi/man.cgi?query=sysexits&apropos=0&sektion=0&manpath=FreeBSD+11.2-stable&arch=default&format=html
