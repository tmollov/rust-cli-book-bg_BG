# Първа имплементация на _grrs_

След последната глава за аргументите на командния ред,
имаме входящите данни,
и можем да започнем да пишем нашия действителен инструмент.
Функцията ни `main` съдържа само този ред в момента:

```rust,ignore
{{#include impl-draft.rs:15:15}}
```

Нека започнем, като отворим файла, който имаме.

```rust,ignore
{{#include impl-draft.rs:16:16}}
```

<aside>

**Забележка:**
Виждате метода [`.expect`] нали?
Това е функция за бърз достъп за излизане, която ще накара програмата да излезе незабавно
когато стойността (в този случай входният файл)
не може да се прочете.
Не е много красиво,
и в следващата глава за [По-добро отчитане на грешки]
ще разгледаме как да подобрим това.

[`.expect`]: https://doc.rust-lang.org/1.39.0/std/result/enum.Result.html#method.expect
[По-добро отчитане на грешки]:./errors.html

</aside>

Сега, нека да итерираме редовете
и отпечатаме всеки, който съдържа нашия шаблон:

```rust,ignore
{{#include impl-draft.rs:18:22}}
```

## Обобщение

Вашият код сега трябва да изглежда така:

```rust,ignore
{{#include impl-draft.rs}}
```

Изпробвайте го: `cargo run -- main src/main.rs` трябва да работи сега!

<aside class="exercise">

**Упражнение за читателя:**
Това не е най-добрата имплементация:
Той ще прочете целия файл в паметта
– колкото и голям да е файлът.
Намерете начин да го оптимизирате!
(Една идея, можете да използвате [`BufReader`]
вместо `read_to_string()`.)

[`BufReader`]: https://doc.rust-lang.org/1.39.0/std/io/struct.BufReader.html

</aside>
